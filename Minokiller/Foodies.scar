Type
  FoodState = (None, Raw, Cooked, Burnt);

  FoodBitmap = Record
    Raw, Cooked, Burnt: Integer;
  End;

  Food = Record
    Name: String;

    OutLinePixels, HPBoost: Integer;
    FoodBMP: FoodBitmap;
  End;

  InvFood = Record
    Name: String;
    State: FoodState;
  End;

  InvFoodAr = Array Of InvFood;
  FoodAr = Array Of Food;

Var
   FoodArray: FoodAr;
   InvFoodArray: InvFoodAr;

Procedure LoadFishArray;

Begin
  SetLength(FoodArray, 5);
  FoodArray[0].Name := 'Shrimp';
  FoodArray[0].OutLinePixels := 137;
  FoodArray[0].HPBoost := 2;

  FoodArray[0].FoodBMP.Raw := BitmapFromString2(False, 'a33EE978DA5D8E49120' +
       '3200804BF84C2B01C5DFFFFA480C9291E5AAB6DAA20A2C693F2DC' +
       '9D105B49C849AAF7642B41E2A3FC0B955F33ABC1D532FD79A9A6B' +
       'B94C7FAFB85D5A5D69276ACCAAF772E7FBC7CBCE646BDB9F6B10A' +
       'C946358DE2EDE92BA68EBD31D875EB80C797718D318334D0A3EB8' +
       '40474030640188D57DF1ECAB25DB5C9725692A14B0E67C5BB5F33' +
       '98FC7ABD3971B58BB32384B87D006F2');

  FoodArray[0].FoodBMP.Cooked := BitmapFromString2(False, 'aF351F78DA5D8F390E0431' +
       '0804BFC46920F4D8F8FF4F1AB07693494AADA205020020AD00130' +
       'BE2B3A84F8BC1EBE66C9ED186AE97EE904B7B5D9FA93A774E2F5A' +
       'B41A273AF36EDE5336BB83D01E8E6F0DC267AB7D185B05C997CCE' +
       '291F5A761ED4AD91410AE32207F4451C831D92194E88130E553EF' +
       'DDFE489E4564AEA9D1867801D07');

  FoodArray[0].FoodBMP.Burnt := BitmapFromString2(False, 'a9407678DA5D8EDB0DC' +
       '4200C045BF20363F80402FD9714AF738AA263A489B5AC1588888D' +
       'E23097B0F615AEB5C29A3321AFD6D04140A58DB04D7A3B36377C7' +
       '24B904BC396D9FACB4B7E7CE197DE732ED8F589BE64C79AA2BFDB' +
       'DBA9A763D60BF67C2D21A1D39CEBA8C38695E0E342BA82A1167C2' +
       'C97CC8079F356570E1EAB9CA08B0779FB6B3E7E72130DF2F606CF' +
       '9');
  FoodArray[1].Name := 'Anchovy';
  FoodArray[1].OutLinePixels := 137;
  FoodArray[1].HPBoost := 2;
  FoodArray[1].FoodBMP.Raw :=  BitmapFromString2(False, 'aA438E78DA4D8F5B0AC' +
       '5300805B764128F9ACF3CF7BFA4AABD94DB034319A60925A22220' +
       '679D4ED6E5041FA7580D1F829AA5210EF288267292128D28A7890' +
       '6265F532D3DF2CC9B3E7282BE5F15A71E8D323D234DDEAEA34573' +
       '2CDE71833B4FB83D38F13585C2D03553B3D1BB751BFC4FD97254A' +
       '4F9A6C4B3C57C17C5A70DBE818525FCE3C494CA9D3BFCC77DFB2D' +
       'F9F00178F142E598B4D516D3031D1');

  FoodArray[1].FoodBMP.Cooked := BitmapFromString2(False, 'aD39FE78DA4D8D410E43' +
       '210805AF04F2105C8A95FB1FA9E26F7EEA62428689101133D3792' +
       'B0FC4F7612714310F356AD9B9150DD754A3DEDFA6F9F5BA8A797D' +
       'E504AD9F0DD5DB94F2DB6BD6BA659F5BE62886BE0D53194A3F277' +
       '82C139B73FC5345DD1602D9134BC9F8A12C908E365A9CC910DD7F' +
       '04BC77710995162DC1B221FA797A09D96AD2A463B51406BED12');

  FoodArray[1].FoodBMP.Burnt := BitmapFromString2(False, 'a9407678DA5D8EDB0DC' +
       '4200C045BF20363F80402FD9714AF738AA263A489B5AC1588888D' +
       'E23097B0F615AEB5C29A3321AFD6D04140A58DB04D7A3B36377C7' +
       '24B904BC396D9FACB4B7E7CE197DE732ED8F589BE64C79AA2BFDB' +
       'DBA9A763D60BF67C2D21A1D39CEBA8C38695E0E342BA82A1167C2' +
       'C97CC8079F356570E1EAB9CA08B0779FB6B3E7E72130DF2F606CF' +
       '9');

  FoodArray[2].Name := 'Meat';
  FoodArray[2].OutLinePixels := 81;
  FoodArray[2].HPBoost := 4;
  FoodArray[2].FoodBMP.Raw := BitmapFromString2(False, 'a42D9078DA7D8D490E433' +
       '10843AF04240C59429BDCFF48C5E9E27755213D908D8188E8BC1A' +
       '54D1988E59E76E5A4893AF3987410F7B5CC5BEC484A23775E01A4' +
       '2A48E66CE4DDF8ECDAFCE6FE8A58F5BB820F72F8D5DA7B4EB2F93' +
       '64B0FCB246AE8CA4A54B2383833EDFE');

  FoodArray[2].FoodBMP.Cooked := BitmapFromString2(False, 'a3348B78DA7D8D3B160' +
       '3210C03AF84F1774B88E1FE478A4511B68A8B29A4F1536B8D78B6' +
       'BA9D051EA368D47FD444A261A047913ED085EDE6B2E02BDA1E824' +
       '421E9466BFDF8CE45D77D49D8B5A9E0C0573FA652DEDC09E63CAD' +
       '9F615EB1F511FE4F4FC9B6DE0C51E274916037E1ECF90572F');

  FoodArray[2].FoodBMP.Burnt := BitmapFromString2(False, 'aD315E78DA7D8D4B120' +
       '3210844AFC41F663B23B9FF9142B348B28A543DBBECA712114BD0' +
       'AC06F57A8611C8A19BC940AF21E3804CD17A2DAD3FAD144C7748F' +
       'EDA1764FDDDF271F0DABCB7F2862FEB381FF8379C48FEB6B95F6A' +
       'DBB19AF94B616EEE5F5A9898E8D19A4965E537E54');

  FoodArray[3].Name := 'Trout';
  FoodArray[3].OutLinePixels := 75;
  FoodArray[3].HPBoost := 7;
  FoodArray[3].FoodBMP.Raw := BitmapFromString2(False, 'a7425378DA358D4112C4' +
       '200804BF0451843902EAFF9FB490D47A68A59D51226266AA95B73' +
       '0358B324F71D953E41634616D460F8BDBAFB59AD2FEB1D92D79BB' +
       'F7F51D21D137A9FDBE1EEDE4E7D179450F2AFDAFA634A33D139A6' +
       '3A9EBA35C4551B147A100D9B28500D7493434ECD8B409D8B5E302' +
       '07827CF880D9B6748240BC76A71077AFAA5F3F15DBD8311C6E9F8' +
       '99A622407E26F6E48C86772D5FD4E2427FF00120');

  FoodArray[3].FoodBMP.Cooked := BitmapFromString2(False, 'a3368278DA4DCE4112032108' +
       '44D12BA1D2DDB01C75BCFF9122A92CB279557C58606636F7C5342' +
       'E9E71E55865EB2559A27A0FBF02B5C5F9F63A316475650DC22917' +
       'CA59BD59968390A713D31F0FBCBEFD61827019169206F3CD3BA37' +
       '1E38124761CBD4CFAAF381B5E2D8A2306172324E3525DB4FF1253' +
       '83275E41EDBFA489EAD915F7196A491F04A');

  FoodArray[3].FoodBMP.Burnt := BitmapFromString2(False, 'a0423878DA658D4B0EC' +
       '5200C03AF14E284CF9252B8FF915E9C7651E961696A46A11191A2' +
       '55E26C1263056B65AFC82E467A0F160AC14DE3D7A6B7999D5E7B7' +
       'AE7909FFC83D25B7EDA72726437BE6D17E7F59999397F06FD04FB' +
       'CE8D425350013D7AD050220F6F74C44AACC884473EC6AA6964984' +
       '71E031C9CD7DCD6AD7BAC8DFB9F71B565EBE5D7B86DDB2F9B172F' +
       '3F915');

  FoodArray[4].Name := 'Salmon';
  FoodArray[4].OutLinePixels := 75;
  FoodArray[0].HPBoost := 9;
  FoodArray[4].FoodBMP.Raw := BitmapFromString2(False, 'a8432F78DA45CE41124' +
       '3210844C12B8132032E15BFF73F522449252E7AF1C05211D146B9' +
       'E729CDF30A7BAE8C76D50A62317F1D4F94A7F6A9B543B16B8B12C' +
       '8FFB486027FEFB85EFDF1DAFCF4E8FFDEEA96F75DE294EFB75446' +
       'D9E96EDBE01B6A1182662336167404158C0EB3190B0332C0FB89A' +
       '90CE49CDCD44F1987C49AC1A42C752517DC18139C38DFE20E8E95' +
       '1E5C29BEB8BFE5F1C9CCE6C993F4E39A339AF717B79');

  FoodArray[4].FoodBMP.Cooked := BitmapFromString2(False, 'aC399478DA4DCFCB8D04310' +
       '804D09428F36938B66D9C7F48035E69672E4FA840208888F628C8' +
       'DF42AE2AD9A6B7C74A43CF184939BC555DDFEE5DA0CE5D3F289FD' +
       '1DD8777ABA7BD3B41D1B2F96160843197C18AF106BFD0A97CA0B1' +
       '6F62EC950CDEA86332106B8A21FE9299377151D4B804E67679319' +
       '7FD2453166692ECB2BEFA4FB8EB7425642E05B28E0AF203A02');

  FoodArray[4].FoodBMP.Burnt := BitmapFromString2(False, 'a0423878DA658D4B0EC' +
       '5200C03AF14E284CF9252B8FF915E9C7651E961696A46A11191A2' +
       '55E26C1263056B65AFC82E467A0F160AC14DE3D7A6B7999D5E7B7' +
       'AE7909FFC83D25B7EDA72726437BE6D17E7F59999397F06FD04FB' +
       'CE8D425350013D7AD050220F6F74C44AACC884473EC6AA6964984' +
       '71E031C9CD7DCD6AD7BAC8DFB9F71B565EBE5D7B86DDB2F9B172F' +
       '3F915');
End;

Function GetOutLine(InvSlot: Integer): Integer;

Var
   Box: TBox;
   Count: TPointArray;

Begin
  If Not LoggedIn Then
    Exit;
  Box := InvBox(InvSlot);
  FindColorsTolerance(Count, 65536, Box.x1, Box.y1, Box.x2, Box.y2, 0);
  Result := Length(Count);
End;

Function StateToString(S: FoodState): String;

Begin
  Case S Of
    None: Result := 'None';
    Raw: Result := 'Raw';
    Cooked: Result := 'Cooked';
    Burnt: Result := 'Burnt';
  End;
End;

Procedure GetFullInv;

Var
   I, C, x, y: Integer;
   iBox: TBox;

Begin
  If Not LoggedIn Then
    Exit;
  For I := 1 To 28 Do
  Begin
    iBox := InvBox(I);
    For C := 0 To Length(FoodArray) - 1 Do
    Begin
      If GetOutLine(I) <> FoodArray[C].OutLinePixels Then
        Continue;
      If FindBitmapToleranceIn(FoodArray[C].FoodBMP.Raw, x, y, iBox.x1, iBox.y1, iBox.x2, iBox.y2, 50) Then
      Begin
        InvFoodArray[I - 1].Name := FoodArray[C].Name;
        InvFoodArray[I - 1].State := Raw;
        Break;
      End;
      If FindBitmapToleranceIn(FoodArray[C].FoodBMP.Cooked, x, y, iBox.x1, iBox.y1, iBox.x2, iBox.y2, 50) Then
      Begin
        Writeln('Found cooked food in :'+inttostr(i)+', it is :'+(FoodArray[C].Name));
        InvFoodArray[I - 1].Name := FoodArray[C].Name;
        InvFoodArray[I - 1].State := Cooked;
        Break;
      End;
      If FindBitmapToleranceIn(FoodArray[C].FoodBMP.Burnt, x, y, iBox.x1, iBox.y1, iBox.x2, iBox.y2, 50) Then
      Begin
        InvFoodArray[I - 1].Name := FoodArray[C].Name;
        InvFoodArray[I - 1].State := Burnt;
        Break;
      End;
    End;
  End;
End;